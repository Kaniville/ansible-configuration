---
- name: ensure VSCode dir exists
  ansible.builtin.file:
    path: "/home/{{ ansible_user_id }}/.var/app/com.visualstudio.code/config/Code/User"
    recurse: true
    state: directory

- name: Configure VisualStudio Code
  ansible.builtin.copy:
    src: vscode/settings.json
    dest: "/home/{{ ansible_user_id }}/.var/app/com.visualstudio.code/config/Code/User/settings.json"

- name: Allow VSCode to use Podman
  ansible.builtin.command: flatpak override --user --filesystem=xdg-run/podman com.visualstudio.code